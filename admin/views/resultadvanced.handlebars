

<style>
      /* Set the size of the div element that contains the map */
      .map {
        height: 400px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }
    </style>
<script data = {{records}}>
   let data = document.currentScript.getAttribute('data');
</script>

<script src="https://assets.what3words.com/sdk/v3/what3words.js?key=S1K5JOJL"></script>

</script>
  <!--Display Panel-->
  <section class="">
   

   
    <div class="">

       <button class="btn btn-primary btn-lg btn-block" type="button" data-toggle="modal" data-target="#searchModal">
              
             <i class="fas fa-search"></i> <span class="pl-1 d-none d-sm-inline-block">Search</span>
            </button>
            <button class="btn pt-3 btn-primary position-sticky btn-lg btn-block" type="button" data-toggle="modal" data-target="#searchModal">
              
             <i class="fas fa-search"></i> <span class="pl-1 d-none d-sm-inline-block">Search</span>
            </button>
            <button class="btn btn-secondary mt-1 btn-lg btn-block" type="button" data-toggle="modal" data-target="#advancedSearch">
              
             <i class="fas fa-search"></i> <span class="pl-1 d-none d-sm-inline-block">Advanced Search</span>
            </button>
     
      </div>
    </div>

    <div class="row mx-2">
      <ul class="list-group p-0 w-100">
        {{#if isEmptyRecord}}
        <li
          class="list-group-item d-flex flex-column p-0 justify-content-center align-items-center border-0 h-100 text-secondary empty-message">
          <h1 class="display-3"></h1>
          <h3>Eish Nothing found!</h3>
        </li>
        {{/if}}

        
         <div class="table-wrapper">
                         <div class="col-md-4 center-block">
      
    </div>
    <br>
        <input class="form-control" type="text" id="searchBar" onkeyup="myFunction()" placeholder="Filter Table..." title="Type in a name">
            <table id="searchTable" class="table table-dark table-hover" >
  
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Latitude</th>
                        <th scope="col">Longitude</th>
                        <th scope="col">Category</th>
                        <th scope="col">More Info</th>
                        

                    </tr>
                </thead>
                       
            
        {{#each records}}
        



  
   </script>
       <tbody>
                    
                        <tr>
                            <td>{{this.name}}</td>
                            <td>{{this.lat}}</td>
                            <td>{{this.lon}}</td>
                            <td>{{this.category}}</td>
                            <td> <button class="btn btn-info" type="button" data-toggle="modal" data-target="#info{{this.id}}">
              
              <span class="pl-1 d-none d-sm-inline-block">More Info</span>
            </button></td>
                            
                        </tr>
                    
                </tbody>
       
          






                     <!--More info Modal-->
            <div class="modal fade" id="info{{this.id}}" tabindex="-1" role="dialog" aria-labelledby="More Info Modal"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title text-secondary font-weight-bold"><i
                        class="fas fa-info-circle"></i> {{this.name}}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body text-secondary">
                    <span class="font-weight-bold">{{this.name}}</span>
                    <br> <p><i class="fas fa-map-marker-alt"></i> {{this.lat}} , {{this.lon}}</p>
                    <p></p><i class="fab fa-internet-explorer"></i> <a href = "{{this.website}}" target="_blank">{{this.website}}</a></p>
                    <p></p><i class="far fa-clock"></i> {{this.tradingHours}}</p>
                    <p></p><i class="fas fa-folder"></i> {{this.category}}</p>
                    <p></p><i class="fas fa-road"></i> {{this.street}}</p>
                    <p></p><i class="fas fa-envelope"></i> {{this.postalCode}}</p>
                    <p><i class="fas fa-map"></i> <a href="map?lat={{this.lat}}&lon={{this.lon}}&radius=300" target="_blank">View this Premises on a map</a></p>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Ok, Got it</button>
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        {{/each}}
          </table>

          
      </ul>
    </div>
  
   
  
    <script>
function myFunction() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("searchBar");
  filter = input.value.toUpperCase();
  table = document.getElementById("searchTable");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }       
  }
}
</script>


 <!--Basic Search-->
            <div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="Search Modal"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title text-secondary font-weight-bold"><i class="fas fa-search"></i> Search our extensive records</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body text-secondary">
          		<div class="main clearfix">
				<form id="nl-form" class="nl-form" action="result" method="GET">
					I'm looking for a shop called  
					<input type="text" name="shopName" value="" placeholder="Some Shop" data-subline="For example: <em>Spar</em> or <em>Media Markt</em>"/>
					<br />which is a
					<input type="text" name="category" value="" placeholder="non-specific" data-subline="For example: <em>Supermarket</em> or <em>Gift</em>"/>
					shop.
					
					<div class="nl-submit-wrap">
						<button class="nl-submit" type="submit">Find a shop</button>
						<button class="nl-submit" onclick="window.location.href='/advanced'" type="button">Advanced Search</button>
					</div>
					<div class="nl-overlay"></div>

				
				</form>
					Avaliabe Categories: <select id="category">
						<option value="" selected>non-specific</option>
						{{#each records}}
						<option value="{{this.category}}">{{this.category}}</option>
						{{/each}}
					</select>
			</div>
		</div><!-- /container -->
		<script src="javascripts/nlform.js"></script>
		<script>
			var nlform = new NLForm( document.getElementById( 'nl-form' ) );
		</script>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No, i'll go back</button>
                    
                  </div>
                </div>
              </div>
            </div>
          </div>


           <!--Advanced Search-->
            <div class="modal fade" id="advancedSearch" tabindex="-1" role="dialog" aria-labelledby="Search Modal"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title text-secondary font-weight-bold"><i class="fas fa-search"></i> Search our extensive records</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body text-secondary">
          		<div class="main clearfix">
			<form id="nl-form-advanced" class="nl-form" action="advancedresult" method="GET">
					I'm looking for a shop called  
					<input type="text" name="shopName" value="" placeholder="Some Shop" data-subline="For example: <em>Spar</em> or <em>Media Markt</em>"/>
					<br />which is a
					<input type="text" name="category" value="" placeholder="non-specific" data-subline="For example: <em>Supermarket</em> or <em>Gift</em>"/>
					shop and is around 
					<input type="number" name="radius" value="" placeholder="some" data-subline="For example: <em>100</em> or <em>5000</em>"/>
					meters away from 
					<input type="text" name="poiName" value="" placeholder="this Point of interest" data-subline="For example: <em>GrazMuseum</em> or <em>Hauptbahnhof</em>"/>
					<div class="nl-submit-wrap">
						<button class="nl-submit" type="submit">Find a shop</button>
						<button class="nl-submit" onclick="window.location.href='/'" type="button">Basic Search</button>
					</div>
					<div class="nl-overlay"></div>

				
				</form>
					Avaliabe Categories: <select id="category">
						<option value="" selected>non-specific</option>
						{{#each records}}
						<option value="{{this.category}}">{{this.category}}</option>
						{{/each}}
					</select>
			</div>
		</div><!-- /container -->
		<script src="javascripts/nlform.js"></script>
		<script>
			var nlform = new NLForm( document.getElementById( 'nl-form-advanced' ) );
		</script>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No, i'll go back</button>
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
 
</section>


